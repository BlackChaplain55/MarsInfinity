electricity = require("./electricity");
orbit_module		= require("./orbit.js")

Ares = new Object();

global.station = Ares;

class Space_Module{
  constructor(Name) {
  	this.Name=Name;
  	this.BatteriesCapacity=0;
  	this.PowerProduction=0;
  	this.SolarBatteries = [];
  };
 };

module.exports.init_station = function(){
	Ares.SkySpear = new Space_Module('SkySpear');
	Ares.Sakura = new Space_Module('Sakura');
	Ares.Science = new Space_Module('Science');
	Ares.Constellation = new Space_Module('Constellation');
	Ares.Dragon = new Space_Module('Dragon');
	Ares.Federation = new Space_Module('Federation');
	Ares.Alabama = new Space_Module('Alabama');

	Ares.g = 0;
	Ares.roll_speed = 0;
	Ares.pitch_speed = 0;
	Ares.yaw_speed = 0;
	Ares.roll = 0;
	Ares.pitch = 0;
	Ares.yaw =0;
	Ares.x_speed = 0;
	Ares.y_speed = 0;
	Ares.z_speed = 0;

	Ares.orbit = new orbit_module.orbit;

	console.log("Station initialization succesfull. Waiting modules initializaton...")
	console.log();
	init_skyspear(Ares.SkySpear);

	
};

function init_skyspear(SkySpear){
	console.log('   <<< SkySpear initialization start >>>');
	SkySpear.SolarBatteries.push(new electricity.SolarBatterie('SB_A1',100));
	SkySpear.SolarBatteries.push(new electricity.SolarBatterie('SB_A2',100));
	SkySpear.SolarBatteries.push(new electricity.SolarBatterie('SB_B1',100));
	SkySpear.SolarBatteries.push(new electricity.SolarBatterie('SB_B2',100));
	SkySpear.SolarBatteries.push(new electricity.SolarBatterie('SB_B3',100));
	SkySpear.SolarBatteries.push(new electricity.SolarBatterie('SB_B4',100));
	SkySpear.SolarBatteries.push(new electricity.SolarBatterie('SB_C1',100));
	SkySpear.SolarBatteries.push(new electricity.SolarBatterie('SB_C2',100));
	SkySpear.SolarBatteries.push(new electricity.SolarBatterie('SB_C3',100));
	SkySpear.SolarBatteries.push(new electricity.SolarBatterie('SB_C4',100));
	SkySpear.SolarBatteries.push(new electricity.SolarBatterie('SB_D1',100));
	SkySpear.SolarBatteries.push(new electricity.SolarBatterie('SB_D2',100));
	SkySpear.SolarBatteries.push(new electricity.SolarBatterie('SB_D3',100));
	SkySpear.SolarBatteries.push(new electricity.SolarBatterie('SB_D4',100));
	SkySpear.SolarBatteries.forEach(function(item,i,arr){
		item.CalcSBPower();
		SkySpear.PowerProduction=SkySpear.PowerProduction+item.Power;
	})
	console.log('      SkySpear: Solar batteries initialized................................OK');
	console.log('      SkySpear: Solar batteries power production.....................'+SkySpear.PowerProduction+' kW');
	console.log('   <<< SkySpear initialization finished succesfully >>>');
	console.log();
};

module.exports.recalc_electricity = function(){
	Ares.SkySpear.SolarBatteries.forEach(function(item,i,arr){
		item.CalcSBPower();
		//console.log(item.Name+item.Power);
		Ares.SkySpear.PowerProduction=Ares.SkySpear.PowerProduction+item.Power;
	})
};

module.exports.recalc_g = function(){
	Ares.g = 10*Ares.roll_speed^2;
}